<?xml version="1.0" encoding="UTF-8"?>
<jasperReport
        xmlns="http://jasperreports.sourceforge.net/jasperreports"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
        name="day-sessions"
        pageWidth="555" pageHeight="2000" columnWidth="555"
        leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0"
        whenNoDataType="AllSectionsNoDetail"
        isIgnorePagination="true">

    <!-- styles first -->
    <style name="Base" fontName="SansSerif" fontSize="10"/>
    <style name="Muted" style="Base" forecolor="#6C757D"/>
    <style name="Bold" style="Base" isBold="true"/>

    <!-- params next -->
    <parameter name="SR_SESSION_SEGMENTS" class="net.sf.jasperreports.engine.JasperReport" isForPrompting="false"/>

    <!-- fields: SessionPdf -->
    <field name="startLabel" class="java.lang.String"/>
    <field name="endLabel" class="java.lang.String"/>
    <field name="durationLabel" class="java.lang.String"/>
    <field name="segmentsSummaryLabel" class="java.lang.String"/>
    <field name="unallocatedLabel" class="java.lang.String"/>
    <field name="segments" class="java.util.List"/>

    <detail>
        <band height="72" splitType="Stretch">

            <!-- session “row” background -->
            <rectangle>
                <reportElement x="0" y="0" width="555" height="32" mode="Opaque" backcolor="#E9ECEF"/>
                <graphicElement>
                    <pen lineWidth="0.0"/>
                </graphicElement>
            </rectangle>

            <textField>
                <reportElement x="8" y="6" width="160" height="14" style="Base"/>
                <textFieldExpression><![CDATA[$F{startLabel}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="168" y="6" width="160" height="14" style="Base"/>
                <textFieldExpression><![CDATA[$F{endLabel}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="328" y="6" width="219" height="14" style="Bold"/>
                <textFieldExpression><![CDATA[$F{durationLabel}]]></textFieldExpression>
            </textField>

            <textField textAdjust="StretchHeight">
                <reportElement x="8" y="20" width="539" height="12" style="Muted"/>
                <textFieldExpression><![CDATA["Segments: " + $F{segmentsSummaryLabel} + " | Unallocated: " + $F{unallocatedLabel}]]></textFieldExpression>
            </textField>

            <!-- segments subreport -->
            <subreport>
                <reportElement x="0" y="36" width="555" height="30" positionType="Float"/>
                <dataSourceExpression><![CDATA[
                    new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(
                        (java.util.Collection)$F{segments}
                    )
                ]]></dataSourceExpression>
                <subreportExpression><![CDATA[$P{SR_SESSION_SEGMENTS}]]></subreportExpression>
            </subreport>

            <!-- bottom spacer line -->
            <line>
                <reportElement x="0" y="70" width="555" height="1" forecolor="#DEE2E6"/>
            </line>

        </band>
    </detail>
</jasperReport>
